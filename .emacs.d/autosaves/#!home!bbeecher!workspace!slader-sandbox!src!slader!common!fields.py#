from django.db import models
from storages.backends.s3boto import S3BotoStorage

from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^slader\.common\.fields\.S3ImageField"])

class ForeignKeyNoCascade(models.ForeignKey):
    allow_cascade = False


class OneToOneFieldNoCascade(models.OneToOneField):
    allow_cascade = False


class S3ImageField(models.ImageField):
    def __init__(self, *args, **kwargs):
        kwargs.pop('storage', None)
        super(S3ImageField, self).__init__(storage=S3BotoStorage(), *args, **kwargs)
